const challenges = [
    { day: 1, title: "بداية البركة", task: "نية الصيام لله + الاتصال بالجد/الجدة للمباركة بالشهر + معلومة: القدس عاصمة فلسطين الأبدية." },
    { day: 2, title: "الهمة العالية", task: "صلاة الضحى (ركعتين) + المساعدة في إعداد القطايف + معلومة: نابلس هي عاصمة الحلويات الفلسطينية." },
    { day: 3, title: "صلة الرحم", task: "إرسال رسائل تهنئة لـ 5 أقارب لم تكلمهم منذ مدة + معلومة: يافا كانت تُسمى 'عروس البحر'." },
    { day: 4, title: "نور القلب", task: "قراءة سورة الكهف (إذا كان جمعة) أو ورد من القرآن + معلومة: خشب الزيتون في بيت لحم يُنحت منه أجمل التحف." },
    { day: 5, title: "الجود والكرم", task: "توزيع تمر وماء وقت الأذان في الشارع أو للجيران + معلومة: الخليل تشتهر بصناعة الزجاج والرسم عليه." },
    { day: 6, title: "العقل السليم", task: "يوم بدون تذمر (كن إيجابياً فقط) + معلومة: غزة كانت محطة تجارية تاريخية تربط آسيا بأفريقيا." },
    { day: 7, title: "الصدقة الخفية", task: "وضع مبلغ بسيط في صندوق صدقة أو مساعدة محتاج دون أن يراك أحد + معلومة: أريحا هي أقدم مدينة في العالم." },
    { day: 8, title: "الرفق بالحيوان", task: "وضع ماء أو طعام لحيوان في الشارع + معلومة: مدينة صفد كانت مركزاً للعلم والعلماء." },
    { day: 9, title: "تراث الأجداد", task: "سؤال كبار السن عن قصة من تاريخ فلسطين قبل عام 48 + معلومة: الثوب الفلسطيني يختلف تطريزه من مدينة لأخرى." },
    { day: 10, title: "ذكر الله", task: "التسبيح والذكر 100 مرة في وقت السحر + معلومة: طبريا تمتلك أجمل بحيرة طبيعية في بلادنا." },
    { day: 11, title: "الإيثار", task: "التنازل عن شيء تحبه لصالح شخص آخر + معلومة: جنين تُلقب بـ 'سلة خضار فلسطين'." },
    { day: 12, title: "العلم نور", task: "قراءة 10 صفحات من كتاب مفيد أو سماع بودكاست ديني + معلومة: قلقيلية تشتهر بأفضل أنواع الجوافة." },
    { day: 13, title: "نظافة البيئة", task: "تنظيف مكان عام أو حديقة قريبة منك + معلومة: اللد والرملة كانتا مدناً محورية في التجارة القديمة." },
    { day: 14, title: "الصلاة على النبي", task: "الصلاة على النبي 200 مرة اليوم + معلومة: عكا صمدت أسوارها أمام نابليون بونابرت." },
    { day: 15, title: "منتصف الشهر", task: "تقييم أهدافك التي وضعتها أول الشهر وتجديد النية + معلومة: المسجد الأقصى هو أولى القبلتين." },
    { day: 16, title: "العفة", task: "غض البصر وحفظ اللسان عن الغيبة طوال اليوم + معلومة: المقلوبة هي الأكلة الأشهر في بيوتنا الفلسطينية." },
    { day: 17, title: "العمل عبادة", task: "إتقان عملك أو دراستك اليوم بأقصى طاقتك + معلومة: الميرمية والزعتر جزء لا يتجزأ من البيت الفلسطيني." },
    { day: 18, title: "دعاء بظهر غيب", task: "الدعاء لـ 3 أشخاص تعرفهم (بالاسم) بالخير + معلومة: جبال نابلس تحضن المدينة كأنها قلب." },
    { day: 19, title: "التواضع", task: "الاعتذار لشخص قد تكون أسأت إليه + معلومة: بئر السبع هي عاصمة النقب وعراقة البداوة." },
    { day: 20, title: "ليالي العشر", task: "الاستعداد للعشر الأواخر بالاعتكاف أو زيادة العبادة + معلومة: كنيسة القيامة في القدس من أقدس الأماكن للمسيحيين." },
    { day: 21, title: "تحدي القوة", task: "ممارسة رياضة خفيفة قبل الإفطار بساعة + معلومة: زيت الزيتون الفلسطيني يعتبر من الأجود عالمياً." },
    { day: 22, title: "إفطار صائم", task: "دعوة صديق أو غريب للإفطار معك + معلومة: مدينة بيسان تتميز بآثارها الرومانية العظيمة." },
    { day: 23, title: "القرآن ربيعي", task: "حفظ آية جديدة وتدبر معناها + معلومة: جبل جرزيم وجبل عيبال يحيطان بنابلس." },
    { day: 24, title: "الوفاء", task: "زيارة قبور الموتى أو الدعاء لهم بالرحمة + معلومة: مدينة طولكرم كانت تسمى وادي الشعير." },
    { day: 25, title: "ليلة القدر؟", task: "الإكثار من دعاء اللهم إنك عفو تحب العفو فاعف عني + معلومة: المسجد الإبراهيمي في الخليل له مكانة عظيمة." },
    { day: 26, title: "بر الوالدين", task: "تقبيل يد الوالدين وطلب الرضا منهم + معلومة: قرى فلسطين تمتلك قصص صمود في كل شبر." },
    { day: 27, title: "صناعة الجمال", task: "زرع شتلة أو وردة في منزلك + معلومة: شجر السرو والنوير يزينان جبال القدس." },
    { day: 28, title: "شكر النعم", task: "كتابة قائمة بـ 10 نعم تملكها وشكر الله عليها + معلومة: الكوفية الفلسطينية أصبحت رمزاً عالمياً للحرية." },
    { day: 29, title: "وداع الشهر", task: "إخراج زكاة الفطر وتجهيز ملابس العيد لمحتاج + معلومة: التكبيرات في مساجد فلسطين لها نكهة خاصة." },
    { day: 30, title: "يوم الجائزة", task: "صلة الرحم والتحضير لصلاة العيد + معلومة: فلسطين ستبقى في القلوب دائماً وأبداً." }
];

function initGrid() {
    const grid = document.getElementById('grid');
    if (!grid) return;
    grid.innerHTML = '';
    for (let i = 1; i <= 30; i++) {
        const card = document.createElement('div');
        card.className = 'day-card';
        if (localStorage.getItem(`day_${i}`)) card.classList.add('completed');
        card.innerHTML = `<span>${i}</span>`;
        card.onclick = () => openModal(i);
        grid.appendChild(card);
    }
}

function openModal(day) {
    window.currentDay = day;
    const challenge = challenges.find(c => c.day === day) || { title: `اليوم ${day}`, task: "تحدي قادم!" };
    document.getElementById('modal-title').innerText = challenge.title;
    document.getElementById('modal-content').innerText = challenge.task;
    document.getElementById('overlay').style.display = 'block';
}

function toggleModal(show) {
    document.getElementById('overlay').style.display = show ? 'block' : 'none';
}

function markAsDone() {
    localStorage.setItem(`day_${window.currentDay}`, 'true');
    toggleModal(false);
    initGrid();
let currentPoints = parseInt(localStorage.getItem('user_points') || '0');
localStorage.setItem('user_points', currentPoints + 10);
updateScore();}
function updateScore() {
    const scoreElement = document.getElementById('points-count');
    if(scoreElement) {
        scoreElement.innerText = localStorage.getItem('user_points') || '0';
    }
}
// استدعي updateScore() في نهاية ملف الـ JS
updateScore();
// البدء عند تحميل الصفحة
initGrid();